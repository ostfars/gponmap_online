<!DOCTYPE html>
<html lang="en">
<head>
    <title>Карта GPON</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <style>
        #map {
            height: 98vh;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            var map = L.map('map').setView([44.729667, 33.606020], 16);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Map data &copy; OpenStreetMap contributors',
                maxZoom: 19,
            }).addTo(map);

            var baseUrl;

            if (window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") {
                baseUrl = "http://localhost:8000";
            } else {
                baseUrl = "http://62.113.103.96";
            }

            var lineColor

            var capacity4Layer = L.geoJSON([], {
                style: {
                    color: '#0da606',
<!--                    dashArray: getStyleByCapacity(4),-->
                    weight: 4,
                },
            });

            var capacity8Layer = L.geoJSON([], {
                style: {
                    color: '#ff0400',
<!--                    dashArray: getStyleByCapacity(8),-->
                    weight: 4,
                },
            });

            // Добавьте слои для других значений capacity по аналогии

            $.ajax({
            url: baseUrl + '/qgis_colorline',
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                // Разделите данные по значениям capacity и добавьте в соответствующие слои
                data.features.forEach(function(feature) {
                    var capacity = feature.properties.capacity;
                    var lineColor = feature.properties.color;

                    if (capacity == 4) {
                        capacity4Layer.addData(feature);
                    } else if (capacity == 8) {
                        capacity8Layer.addData(feature);
                    } else if (capacity == 16) {
                        // Добавьте другие условия для других значений capacity
                    } else {
                        // Добавьте обработку для других значений capacity по аналогии
                    }
                });

        // Добавьте каждый из слоев в карту
        capacity4Layer.addTo(map);
        capacity8Layer.addTo(map);
        // Добавьте другие слои по аналогии

        // Добавьте слои в контроль переключения
        var overlayMaps = {
            // ... остальные слои
            "Линии фактические (4)": capacity4Layer,
            "Линии фактические (8)": capacity8Layer,
            // ... добавьте другие слои по аналогии
        };
        L.control.layers(null, overlayMaps).addTo(map);
    },
    error: function(xhr, status, error) {
        console.error(error);
    },
});


        });
    </script>

</body>
</html>